name: Deploy to AWS Lightsail

on:
    push:
        branches:
        - main  # Cambia esto si usas otra rama

jobs:
    deploy:
        runs-on: ubuntu-latest

    steps:
        - name: Checkout code
          uses: actions/checkout@v2
        - name: Set up SSH
          uses: webfactory/ssh-agent@v0.5.3
          with:
          ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}
        - name: Deploy to Lightsail
          run: |
            ssh -o StrictHostKeyChecking=no ubuntu@44.214.96.162 << 'EOF'
            cd /var/www/html
            git pull origin main
            # Comandos para reiniciar el servidor o mover archivos si es necesario
            EOF